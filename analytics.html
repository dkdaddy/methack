<!DOCTYPE html>
<html lang="en-GB">
<meta name="color-scheme" content="dark light">

<script type="text/javascript">
var sampleSize=500
var chartStyle='flow'
let loadChart = () => {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            console.log("payload returned")
            // console.log(xhttp.responseText)
           let html = xhttp.responseText
            document.getElementById("chart").innerHTML = html
        }
    };
    xhttp.open("GET", `/chart/${chartStyle}/${sampleSize}`, true);
    xhttp.send();
}
let onLoad = () => {
    loadChart(5000)
}
let drill = (param) => {
    console.log("drill down", param)
}
</script>
<head>
    <!-- <link rel="stylesheet" href="graph.css" /> -->
    <!-- <script type="module" src="graph.js"></script> -->
    <style>
        body {
            background-color: white;
        }
        button {
            background-color: rgb(184, 184, 203);
            color: rgb(15, 9, 88);
        }
        td {
            word-wrap: none;
            text-align: left;
        }
    </style>
</head>
<body onLoad="onLoad()">
    <div id="buttonBar">
        <button class="button" onclick="sampleSize=1;loadChart()">Just one</button>
        <button class="button" onclick="sampleSize=10;loadChart()">10</button>
        <button class="button" onclick="sampleSize=100;loadChart()">100</button>
        <button class="button" onclick="sampleSize=1000;loadChart()">1000</button>
        <button class="button" onclick="sampleSize=10000;loadChart()">10,000</button>
        <button class="button" onclick="sampleSize=100000;loadChart()">100,000</button>
        <button class="button" onclick="sampleSize=1000000;loadChart()">All</button>
        <span>&nbsp;</span>
        <span>&nbsp;</span>
        <span>&nbsp;</span>
        <button class="button" onclick="chartStyle='raw';loadChart()">Raw</button>
        <button class="button" onclick="chartStyle='flow';loadChart()">Flow</button>
    </div>
    <br>
    <!-- <div id="chart" style=" height:900px; width:1200ox; border:2px solid rgb(52, 26, 26)"> -->
        <div id="chart"">

    </div> 
</body>